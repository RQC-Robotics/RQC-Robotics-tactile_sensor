schema: '2.0'
stages:
  video_learning:
    cmd: python video_pipeline/learning.py
    deps:
    - path: data/video/signal
      md5: 1d4d80b6904a1e1a53b942312dfe57f2.dir
      size: 827281694
      nfiles: 3
    params:
      params.yaml:
        video_train:
          batch_size: 1000
          learning_rate: 0.0001
          epochs: 36
          model_name: ParamUnet
          layers:
          - 4
          - 8
          - 16
          - 32
          - 64
          - 64
          - 32
          - 16
          - 8
          - 4
          frames_number: 1
          frames_interval: 1
    outs:
    - path: data/v_model
      md5: 1d5c82315f1eea1a85111b42e5d1d27d.dir
      size: 1114893
      nfiles: 1
    - path: reports/full_test_loss.csv
      md5: 965c930a6ee228af82c1c709276b5622
      size: 771
    - path: reports/full_train_loss.csv
      md5: 3cbe1533838312b83b23adaef3f10a3b
      size: 777
    - path: reports/v_summary.json
      md5: ea5405b2997a0e96890913a3e361099d
      size: 82
  video_sim:
    cmd: python video_pipeline/video_sim_runner.py
    deps:
    - path: data/video/pressure
      md5: b1738859c45d567a679e38fc88dbcc1d.dir
      size: 2240658500
      nfiles: 3
    - path: video_pipeline/video_sim_runner.py
      md5: 5f758948e44176c194b94856a90f636a
      size: 2246
    params:
      params.yaml:
        env.phys.gaus_kernel_size: 13
        env.phys.kof: 15
        env.sen_geometry.n_angles: 4
    outs:
    - path: data/video/signal
      md5: 1d4d80b6904a1e1a53b942312dfe57f2.dir
      size: 827281694
      nfiles: 3
  visual:
    cmd: python video_pipeline/prediction_visualization.py
    deps:
    - path: data/v_model
      md5: 1d5c82315f1eea1a85111b42e5d1d27d.dir
      size: 1114893
      nfiles: 1
    params:
      params.yaml:
        visual:
          test/test:
            step: 32
            max_items: 128
          train/train_videos_without_300:
            step: 32
            max_items: 32
    outs:
    - path: data/video/predict_vis
      md5: 8be5969b0b1750a256ff0b133423aefa.dir
      size: 11139624
      nfiles: 65
  push_logs:
    cmd: python csv_logger.py
    deps:
    - path: reports
      md5: 48db577701e5df53ec42bf70ced5ce73.dir
      size: 1666
      nfiles: 4
