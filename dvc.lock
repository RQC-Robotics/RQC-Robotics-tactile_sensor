schema: '2.0'
stages:
  video_learning:
    cmd: python video_pipeline/learning.py
    deps:
    - path: data/video/signal
      md5: 09f79ad5dfe478b748ec574ad305ba6e.dir
      size: 809012080
      nfiles: 2
    params:
      params.yaml:
        video_train:
          batch_size: 1000
          learning_rate: 0.0001
          epochs: 50
          model_name: ParamUnet
          layers:
          - 16
          - 32
          - 64
          - 64
          - 64
          - 64
          - 32
          - 16
          frames_number: 1
          frames_interval: 1
    outs:
    - path: data/v_model
      md5: 2326d7d46fff34d846ca7c226df1ae1f.dir
      size: 2309821
      nfiles: 1
    - path: reports/full_test_loss.csv
      md5: f2a0c1cfdba30b23af37c170e779226a
      size: 1077
    - path: reports/full_train_loss.csv
      md5: 046f255af257cca268ca42d7adbcd1db
      size: 1089
    - path: reports/v_summary.json
      md5: 367d3a03f1f499571d41cab335e06c2f
      size: 83
  video_sim:
    cmd: python video_pipeline/video_sim_runner.py
    deps:
    - path: data/video/pressure
      md5: 2c5f037541b57703901aeaead0cdae3d.dir
      size: 809807812
      nfiles: 2
    - path: video_pipeline/video_sim_runner.py
      md5: 5d607ee2914ea7e257c3ab3bb5e46f0b
      size: 2253
    params:
      params.yaml:
        env.bimodal.intermode_matrix:
        - - 1
          - 0
        - - 0
          - 1
        env.phys.kof: 15
        env.phys.sigma: 1
        env.sen_geometry.n_angles: 4
    outs:
    - path: data/video/signal
      md5: 09f79ad5dfe478b748ec574ad305ba6e.dir
      size: 809012080
      nfiles: 2
  visual:
    cmd: python video_pipeline/prediction_visualization.py
    deps:
    - path: data/v_model
      md5: 2326d7d46fff34d846ca7c226df1ae1f.dir
      size: 2309821
      nfiles: 1
    params:
      params.yaml:
        visual:
          test/test:
            step: 32
            max_items: 128
          train/train_videos:
            step: 32
            max_items: 32
    outs:
    - path: data/video/predict_vis
      md5: c18530a5735d9d7ac963cff17b49ea1f.dir
      size: 11693488
      nfiles: 65
  push_logs:
    cmd: python csv_logger.py
    deps:
    - path: reports
      md5: df6f522f7afa5678d898681f39708012.dir
      size: 484
      nfiles: 4
