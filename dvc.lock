schema: '2.0'
stages:
  video_learning:
    cmd: python video_pipeline/learning.py
    deps:
    - path: data/video/signal
      md5: 51bb2090fad2858b6aae19b82bac4d3a.dir
      size: 762696790
      nfiles: 2
    params:
      params.yaml:
        video_train:
          batch_size: 1000
          learning_rate: 0.0001
          epochs: 8
          model_name: Unet1
          frames_number: 1
          frames_interval: 1
    outs:
    - path: data/v_model
      md5: 7bc2da7f6b3c703047f3e899c3b7798e.dir
      size: 3435563
      nfiles: 1
    - path: reports/full_test_loss.csv
      md5: 0132125b601d2cb89242a088f427d042
      size: 186
    - path: reports/full_train_loss.csv
      md5: f89d20ab02f706e47dc4e9a425479937
      size: 186
    - path: reports/v_summary.json
      md5: 2ba130cad8e5c0d4292bfd9f522ddd37
      size: 82
  video_sim:
    cmd: python video_pipeline/video_sim_runner.py
    deps:
    - path: data/video/pressure
      md5: 2c5f037541b57703901aeaead0cdae3d.dir
      size: 809807812
      nfiles: 2
    - path: video_pipeline/video_sim_runner.py
      md5: 5f758948e44176c194b94856a90f636a
      size: 2246
    params:
      params.yaml:
        env.phys.gaus_kernel_size: 13
        env.phys.kof: 15
        env.sen_geometry.n_angles: 4
    outs:
    - path: data/video/signal
      md5: 51bb2090fad2858b6aae19b82bac4d3a.dir
      size: 762696790
      nfiles: 2
  visual:
    cmd: python video_pipeline/prediction_visualization.py
    deps:
    - path: data/v_model
      md5: 7bc2da7f6b3c703047f3e899c3b7798e.dir
      size: 3435563
      nfiles: 1
    params:
      params.yaml:
        visual:
          test/test:
            step: 32
            max_items: 128
          train/train_videos:
            step: 32
            max_items: 64
    outs:
    - path: data/video/predict_vis
      md5: 2e5522e2ea13e9d617873cbe082f1eda.dir
      size: 11953425
      nfiles: 65
  push_logs:
    cmd: python csv_logger.py
    deps:
    - path: reports
      md5: ef05029e62a5872a6091022e05a3d92b.dir
      size: 490
      nfiles: 4
